!function(t){var e=function(n,i,o){if(this.parent=t("#"+n),this.body=t("body"),this.parent.length<=0)return!1;if(this.options=t.extend({},e.options,i),"object"!=typeof o)return!1;this.data=o||{},this.reset();var s=this;t(window).resize(function(){s.reset()})};e.prototype={reset:function(e){"object"==typeof e&&t.extend(this.options,e),parseInt(this.body.outerWidth())>1255||navigator.userAgent.indexOf("iPad")!==-1?this.options.width=1190:this.options.width=970;var n=(this.options.offsetPages-1)/2;this.total=this.data.length,this.pageNow=this.options.initPage,this.preLeft=280*n/2-140,this.nextLeft=this.options.width-280*n+140,this.preNLeft=-280,this.nextNLeft=this.options.width,this.pageNowLeft=(this.options.width-280)/2,this.drawContent()},drawContent:function(){this.parent.empty(),this.parent.css({width:this.options.width+"px",height:this.options.height+"px",position:"relative"}),this.content=document.createElement("DIV"),this.content.className=this.options.className,this.content.cssText="width:"+this.options.width+"px;height:"+this.options.height+"px;cursor:move;position:absolute;",this.bottomNav=document.createElement("DIV"),this.bottomNav.className="bottomNav";for(var t=1;t<=this.total;t++){var e=document.createElement("DIV");e.className="bottomNavButtonOFF",t==this.pageNow&&(e.className="bottomNavButtonOFF bottomNavButtonON"),e.setAttribute("ref",t),this.bottomNav.appendChild(e)}this.content.appendChild(this.bottomNav),this.bannerControls='<div class="bannerControls"> <div class="leftNav" style="display: block;"></div> <div class="rightNav" style="display: block;"></div> </div>',this.content.innerHTML+=this.bannerControls,this.contentHolder=document.createElement("DIV"),this.contentHolder.style.width=this.options.width+"px",this.contentHolder.style.height=this.options.height+"px";for(var n=0,t=1,i=this.data.length;n<i;++n,++t){var o=document.createElement("DIV");o.className="contentHolderUnit",o.setAttribute("ref",t),o.setAttribute("id","contentHolderUnit"+t);var s='<a href="'+this.data[n].url+'" target="_blank" class="elementLink">';s+="</a>",s+='<img src="'+this.data[n].img+'" alt="'+this.data[n].title+'"/>',s+='<span class="elementOverlay"></span>',s+='<span class="leftShadow"></span>',s+='<span class="rightShadow"></span>',o.innerHTML=s,this.contentHolder.appendChild(o)}this.content.appendChild(this.contentHolder),this.parent.append(this.content),this.parent.css({overflow:"hidden"}),this.initContent(),this.bind(),this.start()},initContent:function(){contentHolderUnit=this.parent.find(".contentHolderUnit"),contentHolderUnit.css({width:"0px",height:"0px",opacity:0,left:this.options.width/2+"px",zIndex:0,marginTop:"135px"}),this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+")").css({width:"280px",height:"220px",opacity:1,left:this.pageNowLeft+"px",zIndex:this.options.offsetPages,marginTop:0}),this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .elementOverlay").css({opacity:0}),this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .leftShadow").css({opacity:1}),this.parent.find(".contentHolderUnit:nth-child("+this.pageNow+") .rightShadow").css({opacity:1}),this.initLeftContent(),this.initRightContent()},initLeftContent:function(){for(var t=(this.options.offsetPages-1)/2,e=280,n=220,i=0;i<t;i++)seeNum=i+1,nowNum=(this.total+(this.pageNow-seeNum))%this.total,nowNum=nowNum>0?nowNum:this.total,widthNow=e*(1-.05*seeNum),heightNow=n*(1-.1*seeNum),left=this.pageNowLeft-140*seeNum,marginTop=.05*seeNum*n,zIndex=t-i,this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").css({opacity:0,left:left+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:marginTop+"px"}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").animate({opacity:1,left:left+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:marginTop+"px"},this.options.speed),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .elementOverlay").css({opacity:.4}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .leftShadow").css({opacity:0}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .rightShadow").css({opacity:0})},initRightContent:function(){for(var t=(this.options.offsetPages-1)/2,e=280,n=220,i=0;i<t;i++)seeNum=i+1,nowNum=(this.pageNow+seeNum)%this.total,nowNum=nowNum>0?nowNum:this.total,widthNow=e*(1-.05*seeNum),heightNow=n*(1-.1*seeNum),left=this.pageNowLeft+28+140*seeNum,marginTop=.05*seeNum*n,zIndex=t-i,this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").css({opacity:0,left:left+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:marginTop+"px"}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").animate({opacity:1,left:left+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:marginTop+"px"},this.options.speed),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .elementOverlay").css({opacity:.4}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .leftShadow").css({opacity:0}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .rightShadow").css({opacity:0})},bind:function(){this.leftNav=this.parent.find(".leftNav"),this.rightNav=this.parent.find(".rightNav"),this.bottonNav=this.parent.find(".bottomNavButtonOFF"),this.lists=this.parent.find(".contentHolderUnit");var t=this;this.parent.mouseover(function(){t.stop(),t.leftNav.show(),t.rightNav.show()}),this.parent.mouseout(function(){t.start()}),t.leftNav.click(function(){t.turn("right")}),t.rightNav.click(function(){t.turn("left")}),t.bottonNav.click(function(){var e=parseInt(this.getAttribute("ref"));if(t.pageNow==e)return!1;if(t.pageNow<e)var n=e-t.pageNow,i=t.pageNow+t.total-e;else var n=t.total-t.pageNow+e,i=t.pageNow-e;return i<n?dir="right":dir="left",t.turnpage(e,dir),!1}),t.lists.click(function(e){var n=parseInt(this.getAttribute("ref"));if(t.pageNow==n)return!0;if(e.preventDefault(),t.pageNow<n)var i=n-t.pageNow,o=t.pageNow+t.total-n;else var i=t.total-t.pageNow+n,o=t.pageNow-n;o<i?dir="right":dir="left",t.turnpage(n,dir)})},initBottomNav:function(){this.parent.find(".bottomNavButtonOFF").removeClass("bottomNavButtonON"),this.parent.find(".bottomNavButtonOFF:nth-child("+this.pageNow+")").addClass("bottomNavButtonON")},start:function(){var t=this;t.timerId&&t.stop(),t.timerId=setInterval(function(){"left"==t.options.direct?t.turn("left"):t.turn("right")},t.options.delay)},stop:function(){clearInterval(this.timerId)},turn:function(t){var e=this;if("right"==t){var n=e.pageNow-1;n<=0&&(n=e.total)}else{var n=e.pageNow+1;n>e.total&&(n=1)}e.turnpage(n,t)},turnpage:function(t,e){var n=this;if(n.locked)return!1;if(n.locked=!0,n.pageNow==t)return!1;var i=function(t,e,i){t>1?t-1:n.total,t==n.total?1:t+1;n.pageNow=t,n.parent.find(".contentHolderUnit:nth-child("+n.pageNow+")").css({zIndex:n.options.offsetPages+1},i),n.parent.find(".contentHolderUnit:nth-child("+n.pageNow+")").animate({width:"280px",height:"220px",opacity:1,left:n.pageNowLeft+"px",zIndex:n.options.offsetPages,marginTop:0},i),n.parent.find(".contentHolderUnit:nth-child("+n.pageNow+") .elementOverlay").css({opacity:0}),n.parent.find(".contentHolderUnit:nth-child("+n.pageNow+") .leftShadow").css({opacity:1}),n.parent.find(".contentHolderUnit:nth-child("+n.pageNow+") .rightShadow").css({opacity:1}),"left"==e?(n.turnLeftContent(!1),n.turnRightContent(!0)):(n.turnRightContent(!1),n.turnLeftContent(!0)),n.initBottomNav()};i(t,e,n.options.speed)},turnLeftContent:function(t){for(var e=(this.options.offsetPages-1)/2,n=280,i=220,o=0;o<e;o++)seeNum=o+1,nowNum=(this.total+(this.pageNow-seeNum))%this.total,nowNum=nowNum>0?nowNum:this.total,widthNow=n*(1-.05*seeNum),heightNow=i*(1-.1*seeNum),left=this.pageNowLeft-140*seeNum,NpreLeft=this.pageNowLeft-140*(seeNum-1),marginTop=.05*seeNum*i,zIndex=e-o,t&&this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").css({opacity:0,left:NpreLeft+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:1.2*marginTop+"px"}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").animate({opacity:1,left:left+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:marginTop+"px"},this.options.speed),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .elementOverlay").css({opacity:.4}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .leftShadow").css({opacity:0}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .rightShadow").css({opacity:0});t&&(this.locked=!1)},turnRightContent:function(t){for(var e=(this.options.offsetPages-1)/2,n=280,i=220,o=0;o<e;o++)seeNum=o+1,nowNum=(this.pageNow+seeNum)%this.total,nowNum=nowNum>0?nowNum:this.total,widthNow=n*(1-.05*seeNum),heightNow=i*(1-.1*seeNum),left=this.pageNowLeft+28+140*seeNum,NnextLeft=this.pageNowLeft+28+140*o,marginTop=.05*seeNum*i,zIndex=e-o,t&&this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").css({opacity:0,left:NnextLeft+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:1.2*marginTop+"px"}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+")").animate({opacity:1,left:left+"px",height:heightNow+"px",width:widthNow+"px",zIndex:zIndex,marginTop:marginTop+"px"},this.options.speed),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .elementOverlay").css({opacity:.4}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .leftShadow").css({opacity:0}),this.parent.find(".contentHolderUnit:nth-child("+nowNum+") .rightShadow").css({opacity:0});t&&(this.locked=!1)}},e.options={offsetPages:3,direct:"left",initPage:1,className:"posterTvGrid",autoWidth:!0,width:970,height:310,delay:5e3,speed:500},window.posterTvGrid=e}(jQuery);